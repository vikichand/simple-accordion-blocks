!function(d){"use strict";d(".js-accordion-item").removeClass("no-js"),d.fn.accordionBlockItem=function(o){var t=d.extend({initiallyOpen:!1,autoClose:!0,clickToClose:!0,scroll:!1,scrollOffset:!1},o),n=250,e=window.location.hash.replace("#",""),i={};function l(){c(),i.content.clearQueue().stop().slideDown(n,function(){t.scroll&&setTimeout(function(){d("html, body").animate({scrollTop:i.self.offset().top-t.scrollOffset},n)},n)}),d(document).trigger("openAccordionItem",i)}function c(){i.self.addClass("is-open is-read"),i.controller.attr("aria-expanded",!0),i.content.removeAttr("hidden")}function s(){i.content.slideUp(n,function(){a()})}function a(){i.self.removeClass("is-open"),i.controller.attr("aria-expanded",!1),i.content.attr("hidden",!0)}function r(){t.autoClose&&i.self.hasClass("is-open")&&s()}return i.self=d(this),i.id=d(this).attr("id"),i.controller=d(this).children(".js-accordion-controller"),i.uuid=i.controller.attr("id").replace("at-",""),i.content=d("#ac-"+i.uuid),i.controller.attr({tabindex:0,"aria-controls":"ac-"+i.uuid}),t.scrollOffset=Math.floor(parseInt(t.scrollOffset,10))||0,(t.initiallyOpen?c:i.id===e?l:a)(),i.controller.click(function(){return i.self.hasClass("is-open")?t.clickToClose&&s():l(),!1}),d(document).on("openAccordionItem",function(o,t){t!==i&&r()}),i.controller.keydown(function(o){var t=o.which;"BUTTON"!==i.controller.prop("tagName")&&(13!==t&&32!==t||d(this).click()),27===t&&r()}),d(window).on("hashchange",function(){if((e=window.location.hash.replace("#",""))===i.id){var o=d("#"+e);o.length&&o.hasClass("js-accordion-item")&&l()}}),this},d(window).on("load",function(){d(".js-accordion-item").each(function(){d(this).accordionBlockItem({initiallyOpen:d(this).data("initially-open"),autoClose:d(this).data("auto-close"),clickToClose:d(this).data("click-to-close"),scroll:d(this).data("scroll"),scrollOffset:d(this).data("scroll-offset")})})})}(jQuery);
